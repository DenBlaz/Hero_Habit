{% load static %}
<!DOCTYPE html>
<link rel="icon" href="{% static 'dashboard/image/logo.svg' %}" type="image/svg+xml">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link
      href="https://fonts.googleapis.com/css?family=Open Sans"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'dashboard/css/dashboard.css' %}">
</head>
<body>
   <div class="container">
      <div class="header1">
        <span><span class="bold">Hero</span>Habit</span>
      </div>
       <div class="header2">
       <div class="navigation">
          <ul>
            <li><a class="active-page" href="{% url 'dashboard:dashboard' %}">Dashboard</a></li>
            <li><a href="{% url 'stats:stats' %}">Statistics</a></li>
            <li><a href="{% url 'calend:calend' %}">Calendar</a></li>
            <li><a href="{% url 'achievements:achiev' %}">Achievements</a></li>
          </ul>
        </div>
        <div class="settings">
            <a class="icon" id="toggle-icon"><img src="/static/dashboard/image/settings.svg" height="30px"/></a>
            <div class="panel" id="toggle-panel">
                <div class="title-settings">
                    <div class="title">
                        <img class="icon" src="/static/dashboard/image/settings.svg" style="margin:15px">
                        <p style="font-size: 34px; margin-top: 15px">Settings</p>
                    </div>
                    <a class="icon" id="close" style="margin: 15px"><img src="/static/dashboard/image/cross.svg"></a>
                </div>
  
                <div class="settings-container">
                    <div class="settings-options">
                        <ul class="options">
                            <li id="ViewProfileOption" class="option">View profile</li>
                            <li id="ChangePassword" class="option">Change password</li>
                        </ul>
                    </div>
  
                    <div class="settings-profile-usage">
                        <div class="settings-profile-section">
                            <p>Profile picture</p>
                            <img style="padding: 2% 0 1% 0;width: 80px" src="/static/dashboard/image/account.svg">
                        </div>
                        <div class="settings-username-section" style="padding: 1% 0 3% 0">
                            <p style="padding: 1% 0 1% 0">Username</p>
                            <input placeholder="Username" >
                        </div>
                        <div class="settings-email-settings" style="padding-bottom: 4%">
                            <p style="padding: 1% 0 1% 0">Email</p>
                            <input placeholder="Email">
                        </div>
                        <button class="settings-button"><img style="width: 14%" src="/static/dashboard/image/pen.svg"> Edit</button>
                    </div>
  
                    <div class="settings-change-password">
                        <div class="settings-password-section" style="padding: 0 0 1.5% 0">
                            <p style="padding: 0 0 1% 0">Current password</p>
                            <input placeholder="Password">
                        </div>
                        <div class="settings-change-section">
                            <p style="padding: 2% 0 1% 0">New password</p>
                            <input placeholder="Password">
                        </div>
                        <div class="settings-change-section" style="padding: 0 0 4% 0">
                            <p style="padding: 3% 0 1% 0">Confirm new password</p>
                            <input placeholder="Password">
                        </div>
                        <button class="settings-button"><img src="/static/dashboard/image/pen.svg"> Save</button>
                    </div>
                </div>
            </div>
            <button id="open-modal" class="icon">
                <img src="/static/dashboard/image/account.svg" height="40px" />
            </button>
            <div id="overlay"></div>
        </div> <!-- Basically everything in here (in header2) is new -->
        </div>

      <div class="content">
       <div class="manage-section">
           <div class="welcome-section rounded">
            <p>Welcome back,</p>
            <p id="user-name">{{ request.user.nickname }}</p>
           </div>

            <div class="days-section" id="days-section">
            <button class="day rounded">Mon</button>
            <button class="day rounded">Tue</button>
            <button class="day rounded">Wed</button>
            <button class="day rounded">Thu</button>
            <a class="other" href="#" id="arrow-btn"><img src="/static/dashboard/image/arrow1.svg"/></a> <!--Changes days-section to include days from Friday to Sunday-->
          </div>
           
          <div class="tasks-section">
            <p class="sticky bold">Assigned tasks</p>
            <p class="pad" > <a ><img src="/static/dashboard/image/plus.svg" height="25px" /></a>Create a task</p>
            <div class="no-tasks">
                <img src="/static/dashboard/image/illustration.svg" height="130px" /></a>
                <p><br />Every hero deserves a rest! <br />
                    Maybe it`s time for new adventures?</p>
            </div>
        </div>
     </div>

     <div class="stats-section rounded paddedx2">
        <div class="hero-stats rounded">
          <img class="level" src="/static/dashboard/image/level.svg" height="60px" />
        </div>
        <div class="activity-stats rounded padded">
          <p class="semi-bold">Task report of the week:</p>
          <p class="right font16px">50/100</p>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 50%"></div>
          </div>
          <p class="font12px">50% completed</p>
        </div>
        <div class="achievement-stats rounded padded">
          <p class="semi-bold">Your last achievement:</p>
          <p class="inline cup font16px">
            <img src="/static/dashboard/image/cup.svg" height="25px" />Description of achievement...
          </p>
        </div>
      </div>


    <div id="profile-modal" class="modal">
    <div class="modal-content rounded">
  
      <p >Account</p>
      
      <div class="flex-center">
        <img src="/static/dashboard/image/account.svg" height="35px" />
        <div class="account-info light grey ">
          <p >{{ request.user.nickname }}</p>
          <p >{{ request.user.email }}</p>
        </div>
      </div>
      <hr />
      <p>
        <form method="post" action="{% url 'logout' %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="inline" style="border: none; background: none; padding: 0; cursor: pointer;">
                Log out
                <img src="/static/dashboard/image/logOutSign.svg" height="25px" />
            </button>
        </form>
      </p>
    </div>
  </div>
</div>
</div>


  <script>
    document.addEventListener("DOMContentLoaded", () => {
        const daysSection = document.getElementById("days-section");
        const arrowButton = document.getElementById("arrow-btn");
        const contentParagraph = document.querySelector('#content p');

        // Контент для каждого дня
        const dayContent = {
            Mon: "",
            Tue: "",
            Wed: "",
            Thu: "",
            Fri: "",
            Sat: "",
            Sun: ""
        };

        let showingWeekdays = true;

        function updateButtons() {
            const buttons = document.querySelectorAll("#days-section button");

            buttons.forEach(button => {
                button.addEventListener("click", () => {
                    buttons.forEach(btn => btn.classList.remove("active-day"));
                    buttons.forEach(btn => btn.classList.add("day"));


                    button.classList.remove("day");
                    button.classList.add("active-day");

                    const day = button.textContent.trim();
                    contentParagraph.textContent = dayContent[day] || "";
                });
            });
        }

        arrowButton.addEventListener("click", (e) => {
            e.preventDefault();

            if (showingWeekdays) {
                daysSection.innerHTML = `
                    <button class="day rounded">Fri</button>
                    <button class="day rounded">Sat</button>
                    <button class="day rounded">Sun</button>
                    <div class="blank"></div>
                    <button class="other" id="arrow-btn">
                        <img src="/static/dashboard/image/arrow2.svg" />
                    </button>
                `;
            } else {
                daysSection.innerHTML = `
                    <button class="day rounded">Mon</button>
                    <button class="day rounded">Tue</button>
                    <button class="day rounded">Wed</button>
                    <button class="day rounded">Thu</button>
                    <button class="other" id="arrow-btn">
                        <img src="/static/dashboard/image/arrow1.svg" />
                    </button>
                `;
            }

            showingWeekdays = !showingWeekdays;

            assignArrowClick();
            updateButtons();
        });

        function assignArrowClick() {
            const newArrowButton = document.getElementById("arrow-btn");
            newArrowButton.addEventListener("click", (e) => {
                e.preventDefault();
                arrowButton.click();
            });
        }

        updateButtons();
    });
    const modal = document.getElementById("profile-modal");
    const openModalBtn = document.getElementById("open-modal");


    openModalBtn.addEventListener("click", () => {
      modal.style.display = "flex"; 
    });

    window.addEventListener("click", (event) => {
      if (event.target === modal) {
        modal.style.display = "none"; 
      }
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toggleIcon = document.getElementById("toggle-icon");
        const closeIcon = document.getElementById("close");
        const panel = document.getElementById("toggle-panel");
        const overlay = document.getElementById("overlay");
        const profileOption = document.getElementById("ViewProfileOption");
        const passwordOption = document.getElementById("ChangePassword");
    
        const profileSection = document.querySelector(".settings-profile-usage");
        const passwordSection = document.querySelector(".settings-change-password");
    
        // Initially show 'Change Password' section
        profileOption.classList.add("active");
        profileSection.style.display = "block";
        passwordSection.style.display = "none";
    
        // Open Settings Panel
        toggleIcon.addEventListener("click", () => {
            panel.style.display = "block";
            overlay.style.display = "block";
        });
    
        // Close Settings Panel
        closeIcon.addEventListener("click", () => {
            panel.style.display = "none";
            overlay.style.display = "none";
        });
    
        overlay.addEventListener("click", () => {
            panel.style.display = "none";
            overlay.style.display = "none";
        });
    
        // Toggle Between Profile and Password Sections
        profileOption.addEventListener("click", function () {
            profileOption.classList.add("active");
            passwordOption.classList.remove("active");
    
            profileSection.style.display = "block";
            passwordSection.style.display = "none";
        });
    
        passwordOption.addEventListener("click", function () {
            passwordOption.classList.add("active");
            profileOption.classList.remove("active");
    
            profileSection.style.display = "none";
            passwordSection.style.display = "block";
        });
    });
</script>
</body>
</html>